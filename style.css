
      /* ====== Global Reset & Box Sizing (Fixes Input Responsiveness) ====== */
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      :root {
        --primary-gradient: linear-gradient(135deg, #00f260 0%, #0575e6 100%);
        --secondary-gradient: linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%);
        --glass-bg: rgba(255, 255, 255, 0.05);
        --glass-border: rgba(255, 255, 255, 0.1);
        --glass-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        --text-main: #ffffff;
        --text-muted: rgba(255, 255, 255, 0.7);
        --input-bg: rgba(0, 0, 0, 0.3);
        --bg-color: #0f0c29;
      }

      body {
        margin: 0;
        font-family: 'Outfit', sans-serif;
        overflow-x: hidden;
        color: var(--text-main);
        background: var(--bg-color);
        min-height: 100vh;
      }

      /* Light mode overrides - Improved Contrast */
      body.light {
        --bg-color: #e6e9f0;
        --glass-bg: rgba(255, 255, 255, 0.85); /* More opaque for readability */
        --glass-border: rgba(0, 0, 0, 0.1); /* Dark border for visibility */
        --glass-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.1);
        --text-main: #1a1a2e;
        --text-muted: rgba(0, 0, 0, 0.65);
        --input-bg: #ffffff; /* Clear white input bg */
        --primary-gradient: linear-gradient(135deg, #2575fc 0%, #6a11cb 100%); /* Stronger gradient */
      }

      /* ====== Canvas Background ====== */
      canvas#bgCanvas {
        position: fixed;
        top: 0;
        left: 0;
        z-index: 0;
        width: 100%;
        height: 100%;
      }

      /* ====== Mode Toggle ====== */
      .mode-toggle {
        position: fixed;
        top: 20px;
        right: 25px;
        background: var(--glass-bg);
        backdrop-filter: blur(10px);
        border: 1px solid var(--glass-border);
        color: var(--text-main);
        padding: 12px;
        border-radius: 50%;
        font-size: 20px;
        cursor: pointer;
        z-index: 20;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        transition: transform 0.3s;
      }
      .mode-toggle:hover { transform: rotate(15deg) scale(1.1); }

      /* ====== Main Container (Glass Card) ====== */
      .container {
        position: relative;
        z-index: 2;
        margin: 40px auto;
        padding: 40px;
        max-width: 850px;
        width: 90%; /* Fluid width for responsiveness */
        background: var(--glass-bg);
        backdrop-filter: blur(16px);
        -webkit-backdrop-filter: blur(16px);
        border: 1px solid var(--glass-border);
        border-radius: 24px;
        box-shadow: var(--glass-shadow);
        text-align: center;
        animation: floatUp 0.8s ease-out;
      }

      @keyframes floatUp {
        from { opacity: 0; transform: translateY(40px); }
        to { opacity: 1; transform: translateY(0); }
      }

      h1 {
        font-size: 2.5rem;
        font-weight: 700;
        background: var(--primary-gradient);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        margin-bottom: 30px;
        letter-spacing: -1px;
      }

      /* ====== Inputs ====== */
      input {
        background: var(--input-bg);
        border: 1px solid var(--glass-border);
        color: var(--text-main);
        padding: 12px 20px;
        border-radius: 12px;
        font-family: inherit;
        font-size: 15px;
        outline: none;
        transition: all 0.3s;
        /* box-sizing: border-box is now handled globally */
      }

      input::placeholder { color: var(--text-muted); }

      input:focus {
        border-color: #4facfe;
        box-shadow: 0 0 15px rgba(79, 172, 254, 0.3);
        background: rgba(0,0,0,0.1);
      }
      
      body.light input:focus { 
        background: #fff; 
        border-color: #2575fc;
        box-shadow: 0 0 15px rgba(37, 117, 252, 0.2);
      }

      .name-section {
        margin-bottom: 30px;
        display: flex;
        justify-content: center;
      }

      .name-section input {
        width: 100%;
        max-width: 350px;
        font-size: 1.1rem;
        text-align: center;
      }

      /* ====== Previous Data Area ====== */
      .prev-data-section {
        display: flex;
        justify-content: center;
        gap: 15px;
        flex-wrap: wrap;
        margin-bottom: 30px;
        padding: 20px;
        background: rgba(255,255,255,0.03);
        border-radius: 16px;
        border: 1px solid var(--glass-border);
      }
      
      body.light .prev-data-section {
        background: rgba(0,0,0,0.03);
      }

      .prev-title {
        width: 100%;
        font-size: 0.9rem;
        color: var(--text-muted);
        margin-bottom: 10px;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      /* ====== Table ====== */
      /* Responsive Table Wrapper */
      .table-wrapper {
        width: 100%;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        margin-bottom: 30px;
      }

      #gradesTable {
        width: 100%;
        min-width: 600px; /* Ensures table doesn't collapse too much */
        border-collapse: separate;
        border-spacing: 0 8px; /* Gap between rows */
      }

      #gradesTable th {
        color: var(--text-muted);
        font-weight: 600;
        font-size: 0.85rem;
        text-transform: uppercase;
        letter-spacing: 1px;
        padding: 10px;
      }

      #gradesTable tr {
        background: rgba(255,255,255,0.02);
        transition: transform 0.2s, background 0.2s;
      }
      
      body.light #gradesTable tr {
        background: rgba(0,0,0,0.03);
      }
      
      #gradesTable tr:hover {
        background: rgba(255,255,255,0.05);
        transform: scale(1.01);
      }
      
      body.light #gradesTable tr:hover {
        background: rgba(0,0,0,0.05);
      }

      #gradesTable td {
        padding: 10px;
        border: none;
      }

      #gradesTable td:first-child { border-radius: 12px 0 0 12px; }
      #gradesTable td:last-child { border-radius: 0 12px 12px 0; }

      #gradesTable input {
        width: 90%;
        text-align: center;
        background: transparent;
        border: 1px solid rgba(255,255,255,0.1);
      }
      
      body.light #gradesTable input { 
        border: 1px solid rgba(0,0,0,0.15); 
        color: #1a1a2e;
      }

      .grade, .gp {
        font-weight: 700;
        color: #4facfe;
      }
      
      body.light .grade, body.light .gp {
        color: #2575fc;
      }

      /* ====== Buttons ====== */
      .btns {
        display: flex;
        justify-content: center;
        gap: 15px;
        flex-wrap: wrap;
      }

      button {
        background: var(--primary-gradient);
        border: none;
        color: #fff;
        padding: 14px 28px;
        font-size: 15px;
        font-weight: 600;
        border-radius: 50px;
        cursor: pointer;
        transition: transform 0.2s, box-shadow 0.2s;
        box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        font-family: inherit;
        white-space: nowrap;
        /* Ensure buttons don't have default styling interfering */
        -webkit-tap-highlight-color: transparent;
      }

      button:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(5, 117, 230, 0.4);
      }
      
      /* Specific button styles */
      .btn-secondary {
        background: transparent;
        border: 1px solid var(--glass-border);
        color: var(--text-main);
      }
      .btn-secondary:hover {
        background: rgba(255,255,255,0.1);
        box-shadow: none;
      }
      
      body.light .btn-secondary:hover {
        background: rgba(0,0,0,0.05);
      }

      /* ====== Circle & Results ====== */
      .circle-section {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 30px;
        margin-top: 40px;
        flex-wrap: wrap;
      }

      #progressCircle {
        width: 180px;
        height: 180px;
        border-radius: 50%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background: conic-gradient(var(--text-muted) 0deg, var(--text-muted) 360deg); /* Default gray */
        position: relative;
        box-shadow: 0 0 30px rgba(0,0,0,0.2);
        transition: background 1s ease;
      }

      #progressCircle::after {
        content: "";
        position: absolute;
        width: 165px;
        height: 165px;
        border-radius: 50%;
        background: var(--bg-color); /* Match card bg? No, match glass */
        background-color: #24243e; /* Hardcoded dark to blend inside circle */
        z-index: 1;
      }

      body.light #progressCircle::after { background-color: #f0f4ff; }

      .circle-content {
        z-index: 2;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      #progressValue {
        font-size: 3.5rem;
        font-weight: 700;
        background: var(--primary-gradient);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }

      #result { margin-top: 20px; font-size: 1.3rem; font-weight: 600; }
      #sgpaDisplay { color: var(--text-muted); margin-top: 5px; font-size: 1rem; }
      #remark { 
        margin-top: 15px; 
        font-weight: 700; 
        color: #00f260; 
        text-shadow: 0 0 10px rgba(0,242,96,0.3);
      }

      /* ====== Grading Scale / Modal ====== */
      .hidden { display: none; }
      #gradingScale {
        margin-top: 20px;
        background: rgba(0,0,0,0.2);
        border-radius: 12px;
        padding: 15px;
        overflow-x: auto;
      }
      
      body.light #gradingScale {
        background: rgba(0,0,0,0.05);
      }

      #gradingScale table { width: 100%; min-width: 300px; }
      #gradingScale td { padding: 5px; border-bottom: 1px solid rgba(255,255,255,0.05); }
      body.light #gradingScale td { border-bottom: 1px solid rgba(0,0,0,0.1); }

      .modal {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(0, 0, 0, 0.8);
        backdrop-filter: blur(5px);
        display: none; align-items: center; justify-content: center; z-index: 100;
      }
      .modal-content {
        background: #1a1a2e;
        padding: 40px; border-radius: 20px; width: 90%; max-width: 320px;
        border: 1px solid rgba(255,255,255,0.1);
        text-align: center;
        box-shadow: 0 20px 50px rgba(0,0,0,0.5);
      }
      body.light .modal-content { background: #fff; border: 1px solid rgba(0,0,0,0.1); }

      /* Footer */
      footer { margin-top: 50px; font-size: 0.8rem; color: var(--text-muted); }

      /* ====== Responsive Queries ====== */
      @media (max-width: 768px) {
        .container { 
          padding: 25px 15px; 
          margin: 20px auto; 
          border-radius: 20px;
        }
        
        h1 { font-size: 1.8rem; margin-bottom: 20px; }
        
        .name-section input { width: 100%; }
        
        .prev-data-section { 
          flex-direction: column; 
          gap: 10px;
          padding: 15px;
        }
        
        .prev-data-section input { width: 100%; }
        
        .btns { 
          flex-direction: column; 
          width: 100%;
        }
        
        .btns button { 
          width: 100%; 
          padding: 12px 20px;
        }

        /* Adjust circle section layout on mobile */
        .circle-section {
          flex-direction: column;
          gap: 20px;
        }
        
        /* Make secondary buttons full width on mobile */
        .circle-section button {
          width: 100%;
        }

        #progressCircle { margin: 10px 0; }
        
        /* Modal Adjustments */
        .modal-content { padding: 30px 20px; }
      }

      /* Extra Small Screens */
      @media (max-width: 400px) {
        h1 { font-size: 1.5rem; }
        #gradesTable th, #gradesTable td { padding: 8px 5px; font-size: 0.8rem; }
      }
    
